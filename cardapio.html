<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cardápio - Garagem 127</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --amarelo-escuro: #d4a017;
      --verde: #1a3d2f;
    }
    /* Scroll para carrinho */
    #cart {
      max-height: 70vh;
      overflow-y: auto;
    }
  </style>
</head>
<body class="bg-black text-white font-sans flex min-h-screen">

  <!-- Conteúdo principal -->
  <main class="flex-grow max-w-6xl mx-auto p-6">
    <h1 class="text-4xl font-bold mb-6 text-[var(--amarelo-escuro)] text-center">Nosso Cardápio</h1>

    <!-- Filtros -->
    <div class="flex justify-center gap-4 mb-10">
      <button class="filter-btn px-4 py-2 bg-yellow-600 text-black font-bold rounded" data-filter="all">Todos</button>
      <button class="filter-btn px-4 py-2 bg-yellow-600 text-black font-bold rounded" data-filter="hamburguer">Hambúrguer</button>
      <button class="filter-btn px-4 py-2 bg-yellow-600 text-black font-bold rounded" data-filter="bebida">Bebidas</button>
      <button class="filter-btn px-4 py-2 bg-yellow-600 text-black font-bold rounded" data-filter="extra">Extras</button>
    </div>

    <!-- Lista de itens -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Exemplo Hambúrguer -->
      <div class="menu-item bg-white rounded-lg shadow p-4 cursor-pointer" data-category="hamburguer" data-name="X-Burger" data-price="25">
        <img src="https://images.unsplash.com/photo-1550547660-d9450f859349" alt="X-Burger" class="rounded-lg mb-4 w-full h-48 object-cover" />
        <h3 class="text-xl font-semibold mb-1 text-black">X-Burger</h3>
        <p class="mb-2 text-gray-700">Pão brioche, carne artesanal, queijo cheddar, alface, tomate e molho especial.</p>
        <p class="font-bold mb-4 text-[var(--amarelo-escuro)]">R$ 25,00</p>
        <button class="add-to-cart bg-yellow-600 text-black font-bold px-4 py-2 rounded hover:bg-yellow-700 transition">Adicionar</button>
      </div>

      <!-- Exemplo Bebida -->
      <div class="menu-item bg-white rounded-lg shadow p-4 cursor-pointer" data-category="bebida" data-name="Refrigerante" data-price="8">
        <img src="https://images.unsplash.com/photo-1582845511205-7c392960415a" alt="Refrigerante" class="rounded-lg mb-4 w-full h-48 object-cover" />
        <h3 class="text-xl font-semibold mb-1 text-black">Refrigerante</h3>
        <p class="mb-2 text-gray-700">Refrigerante gelado para acompanhar seu lanche.</p>
        <p class="font-bold mb-4 text-[var(--amarelo-escuro)]">R$ 8,00</p>
        <button class="add-to-cart bg-yellow-600 text-black font-bold px-4 py-2 rounded hover:bg-yellow-700 transition">Adicionar</button>
      </div>

      <!-- Exemplo Extra -->
      <div class="menu-item bg-white rounded-lg shadow p-4 cursor-pointer" data-category="extra" data-name="Batata Frita" data-price="15">
        <img src="https://images.unsplash.com/photo-1550547660-d9450f859349" alt="Batata Frita" class="rounded-lg mb-4 w-full h-48 object-cover" />
        <h3 class="text-xl font-semibold mb-1 text-black">Batata Frita</h3>
        <p class="mb-2 text-gray-700">Porção de batata frita crocante e deliciosa.</p>
        <p class="font-bold mb-4 text-[var(--amarelo-escuro)]">R$ 15,00</p>
        <button class="add-to-cart bg-yellow-600 text-black font-bold px-4 py-2 rounded hover:bg-yellow-700 transition">Adicionar</button>
      </div>

      <!-- Pode adicionar mais itens seguindo o padrão -->
    </div>
  </main>

  <!-- Carrinho flutuante lateral -->
  <aside id="cart" class="w-80 bg-gray-900 p-6 sticky top-0 h-screen overflow-auto shadow-lg flex flex-col">
    <h2 class="text-2xl font-bold mb-6 text-[var(--amarelo-escuro)]">Carrinho</h2>
    <ul id="cart-items" class="flex-grow overflow-y-auto mb-4 space-y-4">
      <!-- Itens do carrinho aparecem aqui -->
    </ul>
    <div class="border-t border-gray-700 pt-4">
      <p class="text-lg font-semibold mb-4 text-white">Total: <span id="cart-total">R$ 0,00</span></p>
      <button id="checkout-btn" class="w-full bg-yellow-600 text-black font-bold py-3 rounded hover:bg-yellow-700 transition">Finalizar Pedido</button>
    </div>
  </aside>

  <script>
    // Filtrar categorias
    const filterButtons = document.querySelectorAll('.filter-btn');
    const menuItems = document.querySelectorAll('.menu-item');

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const filter = button.getAttribute('data-filter');
        filterButtons.forEach(btn => btn.classList.remove('bg-yellow-900'));
        button.classList.add('bg-yellow-900');
        menuItems.forEach(item => {
          if(filter === 'all' || item.dataset.category === filter) {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
      });
    });

    // Ativa filtro "Todos" ao carregar
    document.querySelector('.filter-btn[data-filter="all"]').click();

    // Carrinho
    const cart = [];
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const checkoutBtn = document.getElementById('checkout-btn');

    function updateCartUI() {
      cartItemsContainer.innerHTML = '';
      let total = 0;

      cart.forEach((item, index) => {
        total += item.price * item.quantity;
        const li = document.createElement('li');
        li.className = 'flex justify-between items-center text-white bg-gray-800 p-3 rounded';

        li.innerHTML = `
          <div>
            <p class="font-semibold">${item.name}</p>
            <p class="text-sm text-gray-300">R$ ${item.price.toFixed(2)} x ${item.quantity}</p>
          </div>
          <div class="flex items-center space-x-2">
            <button data-index="${index}" class="decrease text-yellow-500 font-bold px-2">-</button>
            <button data-index="${index}" class="increase text-yellow-500 font-bold px-2">+</button>
            <button data-index="${index}" class="remove text-red-600 font-bold px-2">x</button>
          </div>
        `;

        cartItemsContainer.appendChild(li);
      });

      cartTotal.textContent = `R$ ${total.toFixed(2)}`;

      // Se carrinho vazio desabilita botão finalizar
      checkoutBtn.disabled = cart.length === 0;
      checkoutBtn.classList.toggle('opacity-50', cart.length === 0);
      checkoutBtn.classList.toggle('cursor-not-allowed', cart.length === 0);
    }

    function addToCart(name, price) {
      const existingItem = cart.find(item => item.name === name);
      if(existingItem) {
        existingItem.quantity++;
      } else {
        cart.push({name, price, quantity: 1});
      }
      updateCartUI();
    }

    // Adicionar evento nos botões
    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', () => {
        const itemEl = button.closest('.menu-item');
        const name = itemEl.dataset.name;
        const price = parseFloat(itemEl.dataset.price);
        addToCart(name, price);
      });
    });

    // Delegação para botões do carrinho (aumentar, diminuir, remover)
    cartItemsContainer.addEventListener('click', e => {
      const index = e.target.getAttribute('data-index');
      if(index === null) return;

      if(e.target.classList.contains('increase')) {
        cart[index].quantity++;
        updateCartUI();
      } else if(e.target.classList.contains('decrease')) {
        if(cart[index].quantity > 1) {
          cart[index].quantity--;
        } else {
          cart.splice(index, 1);
        }
        updateCartUI();
      } else if(e.target.classList.contains('remove')) {
        cart.splice(index, 1);
        updateCartUI();
      }
    });

    // Finalizar pedido
    checkoutBtn.addEventListener('click', () => {
      if(cart.length === 0) {
        alert('Seu carrinho está vazio!');
        return;
      }
      let pedidoResumo = 'Pedido:\n\n';
      cart.forEach(item => {
        pedidoResumo += `${item.name} x${item.quantity} - R$ ${(item.price * item.quantity).toFixed(2)}\n`;
      });
      pedidoResumo += `\nTotal: R$ ${cart.reduce((acc, item) => acc + item.price * item.quantity, 0).toFixed(2)}`;
      alert(pedidoResumo + '\n\nObrigado pelo seu pedido! Em breve entraremos em contato.');
      // Limpa o carrinho após pedido
      cart.length = 0;
      updateCartUI();
    });
  </script>
</body>
</html>
